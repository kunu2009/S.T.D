<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <title>Two Truths One Lie - College Edition 🎉</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
            -webkit-touch-callout: none;
            -webkit-user-select: none;
            user-select: none;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
            overflow-x: hidden;
            padding: env(safe-area-inset-top) env(safe-area-inset-right) env(safe-area-inset-bottom) env(safe-area-inset-left);
        }

        .container {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 20px;
            max-width: 800px;
            width: 100%;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            animation: slideIn 0.5s ease;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(-30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        h1 {
            text-align: center;
            color: #764ba2;
            margin-bottom: 10px;
            font-size: clamp(1.8rem, 6vw, 2.5rem);
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
        }

        .subtitle {
            text-align: center;
            color: #666;
            margin-bottom: 30px;
            font-size: clamp(1rem, 3vw, 1.1rem);
        }

        .emoji {
            font-size: 1.5em;
            margin: 0 5px;
        }

        .section {
            margin-bottom: 25px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 15px;
            border: 2px solid #e9ecef;
        }

        .section-title {
            color: #495057;
            margin-bottom: 15px;
            font-size: 1.3em;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .player-input-group {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
        }

        input[type="text"] {
            flex: 1;
            padding: 15px;
            border: 2px solid #dee2e6;
            border-radius: 10px;
            font-size: clamp(14px, 4vw, 16px);
            transition: all 0.3s;
            min-height: 50px;
        }

        input[type="text"]:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        button {
            padding: 15px 25px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 10px;
            font-size: clamp(14px, 4vw, 16px);
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
            min-height: 50px;
            min-width: 100px;
        }

        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(102, 126, 234, 0.4);
        }

        button:active {
            transform: translateY(0);
        }

        button:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }

        .players-list {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 15px;
        }

        .player-tag {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
            padding: 8px 15px;
            border-radius: 20px;
            display: flex;
            align-items: center;
            gap: 8px;
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: scale(0.8);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        .player-score {
            background: rgba(255, 255, 255, 0.3);
            padding: 2px 8px;
            border-radius: 10px;
            font-size: 0.9em;
        }

        .remove-player {
            background: rgba(255, 255, 255, 0.3);
            border: none;
            color: white;
            cursor: pointer;
            padding: 2px 6px;
            border-radius: 50%;
            transition: background 0.3s;
        }

        .remove-player:hover {
            background: rgba(255, 255, 255, 0.5);
        }

        .game-area {
            display: none;
        }

        .game-area.active {
            display: block;
        }

        .statement-input {
            margin-bottom: 10px;
        }

        .statement-input input {
            width: 100%;
        }

        .statements-display {
            margin-top: 20px;
        }

        .statement-card {
            background: white;
            padding: 15px;
            margin-bottom: 10px;
            border-radius: 10px;
            border: 2px solid #dee2e6;
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
            min-height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
        }

        .statement-card:hover {
            border-color: #667eea;
            transform: translateX(5px);
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
        }

        .statement-card.selected {
            background: #e7f1ff;
            border-color: #4a90e2;
        }

        .statement-card.correct {
            background: #d4f4dd;
            border-color: #52c41a;
        }

        .statement-card.incorrect {
            background: #ffe7e7;
            border-color: #ff4d4f;
        }

        .current-player {
            text-align: center;
            font-size: 1.2em;
            color: #495057;
            margin-bottom: 20px;
            padding: 15px;
            background: linear-gradient(135deg, #ffeaa7 0%, #fdcb6e 100%);
            border-radius: 10px;
        }

        .timer {
            text-align: center;
            font-size: clamp(1.5rem, 8vw, 2rem);
            color: #764ba2;
            margin: 20px 0;
            font-weight: bold;
        }

        .result-message {
            text-align: center;
            padding: 20px;
            margin-top: 20px;
            border-radius: 10px;
            font-size: 1.2em;
            font-weight: bold;
            animation: bounce 0.5s ease;
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        .result-message.success {
            background: #d4f4dd;
            color: #52c41a;
        }

        .result-message.failure {
            background: #ffe7e7;
            color: #ff4d4f;
        }

        .hidden {
            display: none;
        }

        .btn-group {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin-top: 20px;
            flex-wrap: wrap;
        }

        .btn-group button {
            flex: 1;
            min-width: 120px;
            max-width: 200px;
        }

        .leaderboard {
            margin-top: 20px;
            padding: 15px;
            background: linear-gradient(135deg, #f6d365 0%, #fda085 100%);
            border-radius: 10px;
        }

        .leaderboard h3 {
            color: white;
            margin-bottom: 10px;
        }

        .leaderboard-item {
            background: rgba(255, 255, 255, 0.9);
            padding: 8px 12px;
            margin-bottom: 5px;
            border-radius: 5px;
            display: flex;
            justify-content: space-between;
        }

        @media (max-width: 600px) {
            .container {
                padding: 15px;
                margin: 10px;
                max-height: 95vh;
            }
            
            h1 {
                margin-bottom: 15px;
            }
            
            .subtitle {
                margin-bottom: 20px;
            }
            
            .section {
                margin-bottom: 20px;
                padding: 15px;
            }
            
            .player-input-group {
                flex-direction: column;
                gap: 10px;
            }
            
            .statement-input {
                margin-bottom: 8px;
            }
            
            .statement-card {
                padding: 12px;
                margin-bottom: 8px;
                min-height: 50px;
                font-size: 14px;
            }
            
            .btn-group {
                flex-direction: column;
                gap: 10px;
            }
            
            .btn-group button {
                width: 100%;
                max-width: none;
            }
            
            .players-list {
                gap: 5px;
            }
            
            .player-tag {
                font-size: 14px;
                padding: 6px 12px;
            }
            
            .current-player {
                font-size: 1rem;
                padding: 12px;
                margin-bottom: 15px;
            }
            
            .result-message {
                font-size: 1rem;
                padding: 15px;
            }
            
            .leaderboard {
                margin-top: 15px;
                padding: 12px;
            }
            
            .section-title {
                font-size: 1.1rem;
            }
        }

        @media (max-width: 400px) {
            .container {
                padding: 10px;
                border-radius: 15px;
            }
            
            .statement-card {
                padding: 10px;
                font-size: 13px;
                min-height: 45px;
            }
            
            .emoji {
                font-size: 1.2em;
            }
            
            .timer {
                margin: 15px 0;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Two Truths One Lie <span class="emoji">🎭</span></h1>
        <p class="subtitle">Get ready for some fun revelations! <span class="emoji">🎉</span></p>

        <!-- Player Setup Section -->
        <div class="section" id="playerSetup">
            <h2 class="section-title">
                <span class="emoji">👥</span>
                Add Players
            </h2>
            <div class="player-input-group">
                <input type="text" id="playerNameInput" placeholder="Enter player name..." maxlength="20">
                <button onclick="addPlayer()">Add Player</button>
            </div>
            <div class="players-list" id="playersList"></div>
            <div class="btn-group">
                <button onclick="startGame()" id="startGameBtn" disabled>Start Game (Min 2 players)</button>
            </div>
        </div>

        <!-- Game Area -->
        <div class="game-area" id="gameArea">
            <div class="current-player" id="currentPlayerDisplay"></div>
            
            <!-- Statement Input Phase -->
            <div id="statementInputPhase" class="hidden">
                <div class="section">
                    <h2 class="section-title">Enter Your Statements</h2>
                    <p style="color: #666; margin-bottom: 15px;">Enter 2 truths and 1 lie about yourself!</p>
                    <div class="statement-input">
                        <input type="text" id="statement1" placeholder="Statement 1...">
                    </div>
                    <div class="statement-input">
                        <input type="text" id="statement2" placeholder="Statement 2...">
                    </div>
                    <div class="statement-input">
                        <input type="text" id="statement3" placeholder="Statement 3...">
                    </div>
                    <button onclick="submitStatements()">Submit Statements</button>
                </div>
            </div>

            <!-- Guessing Phase -->
            <div id="guessingPhase" class="hidden">
                <div class="section">
                    <h2 class="section-title">Which One is the Lie? 🤔</h2>
                    <div class="timer" id="timer"></div>
                    <div class="statements-display" id="statementsDisplay"></div>
                    <button onclick="submitGuess()" id="submitGuessBtn" disabled>Submit Guess</button>
                </div>
            </div>

            <!-- Result Display -->
            <div id="resultDisplay" class="hidden"></div>

            <!-- Game Controls -->
            <div class="btn-group">
                <button onclick="nextRound()" id="nextRoundBtn" class="hidden">Next Player</button>
                <button onclick="endGame()" style="background: linear-gradient(135deg, #ff6b6b, #ee5a24);">End Game</button>
            </div>
        </div>

        <!-- Leaderboard -->
        <div class="leaderboard hidden" id="leaderboard">
            <h3>🏆 Leaderboard</h3>
            <div id="leaderboardContent"></div>
        </div>
    </div>

    <script>
        let players = [];
        let currentPlayerIndex = 0;
        let currentStatements = [];
        let lieIndex = -1;
        let selectedStatementIndex = -1;
        let gameActive = false;
        let timer = null;
        let timeLeft = 30;

        // Add player function
        function addPlayer() {
            const input = document.getElementById('playerNameInput');
            const name = input.value.trim();
            
            if (name && !players.find(p => p.name === name)) {
                players.push({
                    name: name,
                    score: 0
                });
                input.value = '';
                updatePlayersList();
                
                if (players.length >= 2) {
                    document.getElementById('startGameBtn').disabled = false;
                    document.getElementById('startGameBtn').textContent = `Start Game (${players.length} players)`;
                }
            }
        }

        // Allow adding player with Enter key
        document.getElementById('playerNameInput').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                addPlayer();
            }
        });

        // Update players list display
        function updatePlayersList() {
            const list = document.getElementById('playersList');
            list.innerHTML = '';
            
            players.forEach((player, index) => {
                const tag = document.createElement('div');
                tag.className = 'player-tag';
                tag.innerHTML = `
                    ${player.name}
                    <span class="player-score">Score: ${player.score}</span>
                    <button class="remove-player" onclick="removePlayer(${index})">✕</button>
                `;
                list.appendChild(tag);
            });
        }

        // Remove player
        function removePlayer(index) {
            if (!gameActive) {
                players.splice(index, 1);
                updatePlayersList();
                
                if (players.length < 2) {
                    document.getElementById('startGameBtn').disabled = true;
                    document.getElementById('startGameBtn').textContent = 'Start Game (Min 2 players)';
                } else {
                    document.getElementById('startGameBtn').textContent = `Start Game (${players.length} players)`;
                }
            }
        }

        // Start game
        function startGame() {
            if (players.length < 2) return;
            
            gameActive = true;
            document.getElementById('playerSetup').style.display = 'none';
            document.getElementById('gameArea').classList.add('active');
            document.getElementById('leaderboard').classList.remove('hidden');
            
            currentPlayerIndex = 0;
            startRound();
        }

        // Start a round
        function startRound() {
            const currentPlayer = players[currentPlayerIndex];
            document.getElementById('currentPlayerDisplay').innerHTML = 
                `<span class="emoji">🎮</span> ${currentPlayer.name}'s Turn <span class="emoji">🎮</span>`;
            
            // Show statement input phase
            document.getElementById('statementInputPhase').classList.remove('hidden');
            document.getElementById('guessingPhase').classList.add('hidden');
            document.getElementById('resultDisplay').classList.add('hidden');
            document.getElementById('nextRoundBtn').classList.add('hidden');
            
            // Clear previous inputs
            document.getElementById('statement1').value = '';
            document.getElementById('statement2').value = '';
            document.getElementById('statement3').value = '';
        }

        // Submit statements
        function submitStatements() {
            const s1 = document.getElementById('statement1').value.trim();
            const s2 = document.getElementById('statement2').value.trim();
            const s3 = document.getElementById('statement3').value.trim();
            
            if (!s1 || !s2 || !s3) {
                alert('Please fill in all three statements!');
                return;
            }
            
            currentStatements = [s1, s2, s3];
            
            // Randomly assign which one is the lie
            lieIndex = Math.floor(Math.random() * 3);
            
            // Start guessing phase
            document.getElementById('statementInputPhase').classList.add('hidden');
            document.getElementById('guessingPhase').classList.remove('hidden');
            
            displayStatements();
            startTimer();
        }

        // Display statements for guessing
        function displayStatements() {
            const display = document.getElementById('statementsDisplay');
            display.innerHTML = '';
            
            currentStatements.forEach((statement, index) => {
                const card = document.createElement('div');
                card.className = 'statement-card';
                card.innerHTML = `${index + 1}. ${statement}`;
                card.onclick = () => selectStatement(index);
                display.appendChild(card);
            });
        }

        // Select a statement
        function selectStatement(index) {
            selectedStatementIndex = index;
            
            // Update visual selection
            document.querySelectorAll('.statement-card').forEach((card, i) => {
                if (i === index) {
                    card.classList.add('selected');
                } else {
                    card.classList.remove('selected');
                }
            });
            
            document.getElementById('submitGuessBtn').disabled = false;
        }

        // Start countdown timer
        function startTimer() {
            timeLeft = 30;
            updateTimerDisplay();
            
            timer = setInterval(() => {
                timeLeft--;
                updateTimerDisplay();
                
                if (timeLeft <= 0) {
                    clearInterval(timer);
                    submitGuess();
                }
            }, 1000);
        }

        // Update timer display
        function updateTimerDisplay() {
            const timerEl = document.getElementById('timer');
            timerEl.textContent = `⏱️ ${timeLeft}s`;
            
            if (timeLeft <= 10) {
                timerEl.style.color = '#ff4d4f';
            } else {
                timerEl.style.color = '#764ba2';
            }
        }

        // Submit guess
        function submitGuess() {
            clearInterval(timer);
            
            if (selectedStatementIndex === -1) {
                selectedStatementIndex = Math.floor(Math.random() * 3);
            }
            
            // Show results
            document.querySelectorAll('.statement-card').forEach((card, index) => {
                if (index === lieIndex) {
                    card.classList.add('incorrect');
                    card.innerHTML += ' <span class="emoji">🤥 (LIE)</span>';
                } else {
                    card.classList.add('correct');
                    card.innerHTML += ' <span class="emoji">✅ (TRUTH)</span>';
                }
            });
            
            // Calculate points for other players
            const isCorrect = selectedStatementIndex === lieIndex;
            let message = '';
            
            if (isCorrect) {
                // Award points to all other players who guessed correctly
                players.forEach((player, index) => {
                    if (index !== currentPlayerIndex) {
                        player.score += 10;
                    }
                });
                message = `🎉 Correct! You found the lie! Everyone gets 10 points!`;
            } else {
                // Current player gets points for fooling others
                players[currentPlayerIndex].score += 5;
                message = `😅 Wrong! That was actually true! ${players[currentPlayerIndex].name} gets 5 points for fooling you!`;
            }
            
            // Display result
            const resultDiv = document.getElementById('resultDisplay');
            resultDiv.className = isCorrect ? 'result-message success' : 'result-message failure';
            resultDiv.textContent = message;
            resultDiv.classList.remove('hidden');
            
            // Update leaderboard
            updateLeaderboard();
            
            // Show next round button
            document.getElementById('submitGuessBtn').disabled = true;
            document.getElementById('nextRoundBtn').classList.remove('hidden');
        }

        // Next round
        function nextRound() {
            selectedStatementIndex = -1;
            currentPlayerIndex = (currentPlayerIndex + 1) % players.length;
            startRound();
        }

        // Update leaderboard
        function updateLeaderboard() {
            const sortedPlayers = [...players].sort((a, b) => b.score - a.score);
            const content = document.getElementById('leaderboardContent');
            
            content.innerHTML = '';
            sortedPlayers.forEach((player, index) => {
                const item = document.createElement('div');
                item.className = 'leaderboard-item';
                
                let medal = '';
                if (index === 0) medal = '🥇';
                else if (index === 1) medal = '🥈';
                else if (index === 2) medal = '🥉';
                
                item.innerHTML = `
                    <span>${medal} ${player.name}</span>
                    <span>${player.score} points</span>
                `;
                content.appendChild(item);
            });
        }

        // End game
        function endGame() {
            if (confirm('Are you sure you want to end the game?')) {
                gameActive = false;
                clearInterval(timer);
                
                // Show final results
                const winner = [...players].sort((a, b) => b.score - a.score)[0];
                alert(`🏆 Game Over! 🏆\n\nWinner: ${winner.name} with ${winner.score} points!\n\nThanks for playing!`);
                
                // Reset game
                location.reload();
            }
        }
    </script>
</body>
</html>